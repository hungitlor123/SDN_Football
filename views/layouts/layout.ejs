<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %> - Football Manager</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link href="/css/style.css" rel="stylesheet" />
    <style>
      html,
      body {
        height: 100%;
      }
      body {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        background: #f4f6fa;
      }
      .container-fluid {
        flex: 1 0 auto;
        display: flex;
        flex-direction: column;
        min-height: 0;
      }
      .row {
        flex: 1 0 auto;
        min-height: 0;
      }
      .sidebar {
        background: #1a2236;
        min-height: 100vh;
        color: #fff;
        padding-top: 2rem;
      }
      .sidebar .nav-link,
      .sidebar .navbar-brand {
        color: #fff;
      }
      .sidebar .nav-link.active,
      .sidebar .nav-link:hover {
        background: #232b47;
        color: #ffd700;
      }
      .sidebar .navbar-brand {
        font-size: 1.7rem;
        font-weight: bold;
        letter-spacing: 1px;
      }
      .header-bar {
        background: #fff;
        border-bottom: 1px solid #eaeaea;
        padding: 1rem 2rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .header-bar .user-info {
        display: flex;
        align-items: center;
        gap: 1rem;
      }
      .header-bar .user-info i {
        color: #ffd700;
      }
      .main-content {
        min-height: 0;
        flex: 1 0 auto;
        padding: 2.5rem 0.5rem;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        background: #f4f6fa;
      }
      .main-inner {
        width: 100%;
        max-width: 1100px;
        margin: 0 auto;
      }
      .footer {
        background: #1a2236;
        color: #fff;
        padding: 1.5rem 0;
        text-align: center;
        margin-top: 0;
        flex-shrink: 0;
      }
      @media (max-width: 768px) {
        .main-content {
          padding: 1rem 0.2rem;
        }
        .header-bar {
          padding: 1rem 0.5rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <!-- Sidebar -->
        <nav class="col-md-2 d-none d-md-block sidebar">
          <div class="navbar-brand mb-4">
            <i class="fas fa-futbol me-2"></i>Football Manager
          </div>
          <ul class="nav flex-column">
            <li class="nav-item mb-2">
              <a
                class="nav-link <%= (activePage === 'home') ? 'active' : '' %>"
                href="/"
              >
                <i class="fas fa-home me-2"></i>Home
              </a>
            </li>
            <% if (user && user.isAdmin) { %>
            <li class="nav-item mb-2">
              <a
                class="nav-link <%= (activePage === 'players') ? 'active' : '' %>"
                href="/admin/players"
              >
                <i class="fas fa-users-cog me-2"></i>Players
              </a>
            </li>
            <li class="nav-item mb-2">
              <a
                class="nav-link <%= (activePage === 'teams') ? 'active' : '' %>"
                href="/admin/teams"
              >
                <i class="fas fa-shield-alt me-2"></i>Teams
              </a>
            </li>
            <li class="nav-item mb-2">
              <a
                class="nav-link <%= (activePage === 'accounts') ? 'active' : '' %>"
                href="/accounts"
              >
                <i class="fas fa-user-group me-2"></i>Accounts
              </a>
            </li>
            <% } %> <% if (!user) { %>
            <li class="nav-item mb-2">
              <a
                class="nav-link <%= (activePage === 'login') ? 'active' : '' %>"
                href="/login"
              >
                <i class="fas fa-sign-in-alt me-2"></i>Login
              </a>
            </li>
            <li class="nav-item mb-2">
              <a
                class="nav-link <%= (activePage === 'register') ? 'active' : '' %>"
                href="/register"
              >
                <i class="fas fa-user-plus me-2"></i>Register
              </a>
            </li>
            <% } %>
          </ul>
        </nav>
        <!-- Main -->
        <div
          class="col-md-10 ms-sm-auto px-0 d-flex flex-column"
          style="min-height: 100vh"
        >
          <div class="header-bar">
            <div><h4 class="mb-0"><%= title %></h4></div>
            <div class="user-info">
              <% if (user) { %>
              <i class="fas fa-user-circle fa-2x"></i>
              <span
                ><strong><%= user.name %></strong> (<%= user.isAdmin ? 'Admin' :
                'Member' %>)</span
              >
              <a href="/profile" class="btn btn-outline-secondary btn-sm"
                >Profile</a
              >
              <a href="/logout" class="btn btn-warning btn-sm">Logout</a>
              <% } else { %>
              <a href="/login" class="btn btn-primary btn-sm">Login</a>
              <a href="/register" class="btn btn-outline-primary btn-sm"
                >Register</a
              >
              <% } %>
            </div>
          </div>
          <main class="main-content">
            <div class="main-inner"><%- body %></div>
          </main>
          <div class="footer">
            &copy; 2024 Football Manager. All rights reserved.
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
