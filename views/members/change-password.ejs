<div
  class="d-flex justify-content-center align-items-center"
  style="min-height: 80vh"
>
  <div
    class="card shadow-lg p-4 w-100"
    style="max-width: 400px; border-radius: 20px"
  >
    <div class="text-center mb-4">
      <i class="fas fa-key fa-3x mb-2 text-warning"></i>
      <h3 class="fw-bold mb-0" style="color: #1a2236">Change Password</h3>
      <div class="text-muted mb-2">Football Manager</div>
    </div>
    <% if (success) { %>
    <div class="alert alert-success" role="alert">
      <i class="fas fa-check-circle me-2"></i>
      <%= success %>
    </div>
    <% } %> <% if (error) { %>
    <div class="alert alert-danger" role="alert">
      <i class="fas fa-exclamation-triangle me-2"></i>
      <%= error %>
    </div>
    <% } %>
    <form action="/change-password" method="POST" id="changePasswordForm">
      <div class="mb-3">
        <label for="currentPassword" class="form-label"
          >Current Password *</label
        >
        <input
          type="password"
          class="form-control form-control-lg"
          id="currentPassword"
          name="currentPassword"
          required
          style="border-radius: 10px"
        />
      </div>
      <div class="mb-3">
        <label for="newPassword" class="form-label">New Password *</label>
        <input
          type="password"
          class="form-control form-control-lg"
          id="newPassword"
          name="newPassword"
          minlength="6"
          required
          style="border-radius: 10px"
        />
        <div class="form-text">Minimum 6 characters</div>
      </div>
      <div class="mb-3">
        <label for="confirmPassword" class="form-label"
          >Confirm New Password *</label
        >
        <input
          type="password"
          class="form-control form-control-lg"
          id="confirmPassword"
          name="confirmPassword"
          minlength="6"
          required
          style="border-radius: 10px"
        />
      </div>
      <div class="d-grid gap-2 d-md-flex justify-content-md-between">
        <a href="/profile" class="btn btn-outline-secondary">
          <i class="fas fa-arrow-left me-1"></i> Back to Profile
        </a>
        <button type="submit" class="btn btn-warning fw-bold" id="changeBtn">
          <span id="changeBtnText"
            ><i class="fas fa-save me-1"></i> Change Password</span
          >
        </button>
      </div>
    </form>
    <div class="mt-4">
      <h6 class="fw-bold mb-2" style="color: #1a2236">
        <i class="fas fa-shield-alt me-2"></i>Security Tips
      </h6>
      <ul class="list-unstyled mb-0 small">
        <li class="mb-2">
          <i class="fas fa-check text-success me-2"></i>Use a password with at
          least 6 characters
        </li>
        <li class="mb-2">
          <i class="fas fa-check text-success me-2"></i>Include numbers and
          special characters
        </li>
        <li class="mb-2">
          <i class="fas fa-check text-success me-2"></i>Avoid using personal
          information
        </li>
        <li>
          <i class="fas fa-check text-success me-2"></i>Don't reuse passwords
          from other accounts
        </li>
      </ul>
    </div>
  </div>
</div>
<script>
  document
    .getElementById("changePasswordForm")
    .addEventListener("submit", function (e) {
      const newPassword = document.getElementById("newPassword").value;
      const confirmPassword = document.getElementById("confirmPassword").value;
      var btn = document.getElementById("changeBtn");
      var btnText = document.getElementById("changeBtnText");
      if (newPassword !== confirmPassword) {
        e.preventDefault();
        alert("New password and confirmation do not match!");
        return false;
      }
      if (newPassword.length < 6) {
        e.preventDefault();
        alert("New password must be at least 6 characters long!");
        return false;
      }
      btn.disabled = true;
      btnText.innerHTML =
        '<span class="spinner-border spinner-border-sm me-2"></span>Changing...';
    });
</script>
